#include <stdio.h>
#include <gb/gb.h>
#include <rand.h>
#include <time.h>

unsigned char SampleTiles[] =
{
	0x00, 0x00, 0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00,
	0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x00, 0xFF, 0x00,

	0x00, 0x00, 0x00, 0x00, 0x92, 0x00, 0x54, 0x00, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x4A, 0x00, 0x54, 0x00, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00,

	0x00, 0xFF, 0x7F, 0x80, 0x41, 0xBE, 0x5D, 0xA2, 0x5D, 0xA2, 0x5D, 0xA2, 0x41, 0xBE, 0x7F, 0x80,
	0x7F, 0x80, 0x41, 0xBE, 0x5D, 0xA2, 0x5D, 0xA2, 0x5D, 0xA2, 0x41, 0xBE, 0x7F, 0x80, 0x00, 0xFF,
	0x00, 0xFF, 0xFE, 0x01, 0x82, 0x7D, 0xBA, 0x45, 0xBA, 0x45, 0xBA, 0x45, 0x82, 0x7D, 0xFE, 0x01,
	0xFE, 0x01, 0x82, 0x7D, 0xBA, 0x45, 0xBA, 0x45, 0xBA, 0x45, 0x82, 0x7D, 0xFE, 0x01, 0x00, 0xFF
};

const unsigned char FirstMap[] =
{
	0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
	0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
	0x01, 0x01, 0x02, 0x02, 0x02, 0x00, 0x00, 0x02, 0x02, 0x02,
	0x01, 0x01, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02
	0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
	0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
	0x01, 0x01, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
	0x01, 0x01, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
	0x01, 0x01, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02
};

void main()
{
	UBYTE i, j;
	disable_interrupts();   // Do not allow interrupts during INIT
	DISPLAY_OFF;    // GBDK macro
	LCDC_REG = 0x47;   // Set some hardware registers for various things like enabling background
	BGP_REG = OBP0_REG = OBP1_REG = 0xE4U;// Set the palette to binary: 11 10 01 00, which is all 4 colors
	set_bkg_data(0x00, 0x08, SampleTiles);// Loads image data into memory (startingTile, #oftiles, points to unsigned char containing image data)
	/*
	* Draw the background
	*
	* Width  = 0x100 = 0x20 * 8
	* Height = 0x100 = 0x20 * 8
	*/

	//set_bkg_tiles(0, 0, 20, 18, mapData);
	for (i = 0; i < 32; i += 8)
		for (j = 0; j < 32; j += 8)
			set_bkg_tiles(i, j, 8, 8, FirstMap);//displays image data (x,y,w,h,unsigned char containing tile data)
	DISPLAY_ON;      // GBDK macro
	enable_interrupts();    // Allow interrupts as we're out of our INIT stage

	while (1) {
		wait_vbl_done();    // wait for VBlank
	}
}
//
//void main()
//{
//	UBYTE i, j;
//
//	disable_interrupts();
//	DISPLAY_OFF;
//	LCDC_REG = 0x47;   // Set some hardware registers for various things like enabling background
//	/*
//	* LCD        = Off
//	* WindowBank = 0x9C00
//	* Window     = On
//	* BG Chr     = 0x8800
//	* BG Bank    = 0x9800
//	* OBJ        = 8x16
//	* OBJ        = On
//	* BG         = On
//	*/
//	/* Set palettes */
//	BGP_REG = OBP0_REG = OBP1_REG = 0xE4U;
//
//	/* Initialize the background */
//	set_bkg_data(0, 8, SampleTiles);
//	//for (i = 0; i < 32; i += 8)
//		//for (j = 0; j < 32; j += 8)
//			//set_bkg_tiles(i, j, 8, 8, SampleTiles);
//	set_bkg_tiles(0, 0, 20, 18, SampleTiles);
//
//	DISPLAY_ON;
//	enable_interrupts();
//	/*
//	UBYTE keys = 0;
//	printf("Welcome to GAMEBOY\nProgramming");
//	printf("\nPress Start");
//	waitpad(J_START);  // other keys are J_A, J_UP, J_SELECT, etc.
//	printf("\nIsn't it easy!");
//	while (1)
//	{
//		keys = joypad();
//		if (keys & J_A)
//		{
//			printf("\nHeiBoi A Boi");
//		}
//		else if (keys & J_B)
//		{
//			printf("\nHeiBoi B Boi");
//		}
//	}
//	*/
//}