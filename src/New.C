#include <stdio.h>
#include <gb/gb.h>
#include <rand.h>
#include <time.h>
/* Bank of tiles. */
#define SampleTilesBank 0

const unsigned char std_data[] = {
	/* Basic tiles (0xFC to 0xFF) */
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00,
	0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

/* Start of tile array. */
unsigned char SampleTiles[] =
{
	//Wood floor (0x00 - 0x03)
	0x00, 0x00, 0x00, 0x00, 0x60, 0x00, 0x00, 0x00,	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00,
	0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,	0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x00,	0x00, 0x00, 0x00, 0x00, 0xE0, 0x00, 0xFF, 0x00,

	//Grass
	0x00, 0x00, 0x00, 0x00, 0x92, 0x00, 0x54, 0x00,	0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x4A, 0x00,	0x54, 0x00, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00
};

#define WINSZX    0x80                  /* Size of the picture in the window */
#define WINSZY    0x50
#define MINWINX   (MAXWNDPOSX-WINSZX+1) /* Bounds of the window origin */
#define MINWINY   (MAXWNDPOSY-WINSZY+1)
#define MAXWINX   MAXWNDPOSX
#define MAXWINY   MAXWNDPOSY

const unsigned char mapData[] = {
	0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02,
	0x01, 0x03, 0x01, 0x03, 0x01, 0x03, 0x01, 0x03,
	0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02,
	0x01, 0x03, 0x01, 0x03, 0x01, 0x03, 0x01, 0x03,
	0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02,
	0x01, 0x03, 0x01, 0x03, 0x01, 0x03, 0x01, 0x03,
	0x04, 0x06, 0x04, 0x06, 0x04, 0x06, 0x04, 0x06,
	0x05, 0x07, 0x05, 0x07, 0x05, 0x07, 0x05, 0x07
};

void main()
{
	UWORD idx;    // our index counter
	UBYTE i, j;
	disable_interrupts();   // Do not allow interrupts during INIT
	DISPLAY_OFF;    // GBDK macro
	LCDC_REG = 0x47;   // Set some hardware registers for various things like enabling background
	BGP_REG = OBP0_REG = OBP1_REG = 0xE4U;// Set the palette to binary: 11100100 or all 4 colors
	set_bkg_data(0x00, 0x08, SampleTiles);//loads image data into memory (startingTile,#oftiles,points to unsigned char containing image data)
	/*
	* Draw the background
	*
	* Width  = 0x100 = 0x20 * 8
	* Height = 0x100 = 0x20 * 8
	*/
	for (i = 0; i < 32; i += 8)
		for (j = 0; j < 32; j += 8)
			set_bkg_tiles(i, j, 8, 8, mapData);//displays image data (x,y,w,h,unsigned char containing tile data)
	DISPLAY_ON;      // GBDK macro
	enable_interrupts();    // allow interrupts as we're out of our INIT stage

	while (1) {
		wait_vbl_done();    // wait for VBlank
	}
}
//
//void main()
//{
//	UBYTE i, j;
//
//	disable_interrupts();
//	DISPLAY_OFF;
//	LCDC_REG = 0x47;   // Set some hardware registers for various things like enabling background
//	/*
//	* LCD        = Off
//	* WindowBank = 0x9C00
//	* Window     = On
//	* BG Chr     = 0x8800
//	* BG Bank    = 0x9800
//	* OBJ        = 8x16
//	* OBJ        = On
//	* BG         = On
//	*/
//	/* Set palettes */
//	BGP_REG = OBP0_REG = OBP1_REG = 0xE4U;
//
//	/* Initialize the background */
//	set_bkg_data(0, 8, SampleTiles);
//	//for (i = 0; i < 32; i += 8)
//		//for (j = 0; j < 32; j += 8)
//			//set_bkg_tiles(i, j, 8, 8, SampleTiles);
//	set_bkg_tiles(0, 0, 20, 18, SampleTiles);
//
//	DISPLAY_ON;
//	enable_interrupts();
//	/*
//	UBYTE keys = 0;
//	printf("Welcome to GAMEBOY\nProgramming");
//	printf("\nPress Start");
//	waitpad(J_START);  // other keys are J_A, J_UP, J_SELECT, etc.
//	printf("\nIsn't it easy!");
//	while (1)
//	{
//		keys = joypad();
//		if (keys & J_A)
//		{
//			printf("\nHeiBoi A Boi");
//		}
//		else if (keys & J_B)
//		{
//			printf("\nHeiBoi B Boi");
//		}
//	}
//	*/
//}